# 7. 보조기억장치
## 7-1 다양한 보조기억장치
- 하드 디스크
- 플래터
- 데이터 접근 시간
- 플래시 메모리
- 페이지
- 블록

### HDD
- 자기적인(magnetic) 방식으로 저장하는 보조 기억 장치
- 플래터: 하드 디스크 안속 실질적 저장되는 원판형 모양
  - 플래터 양면 사용 가능
  - 여러겹의 플래터로 이루어져 있음
- 스핀들: 플래터를 회전시키는 구성요소 (spindle)
- RPM: 분당 회전수 (Revolution per minute)
- 헤드 : 플래터를 대상으로 읽고 쓰는 부분
  - 양면 플래터시 위 아래 두개의 헤드 사용
- 디스크 암 : 헤드를 이동시키는 부품

### 플래터 저장 방식
- 트랙
  - 플래터 원
- 섹터
  - 플래터의 피자 한조각 
- 블록
  - 하나 이상의 섹터
- 실린더
  - 여러겹의 플래터 상 같은 트랙 위치를 연결한 논리적 단위
  - 연속된 정보는 한 실린더에 기록된다
  - 디스크암을 움직이지 않고도 정보에 접근 가능하기 때문

### 저장된 데이터에 접근하는 방식
- 탐색시간
  - 헤드가 트랙까지 이동하는 시간
- 회전 지연
  - 헤드가 있는 쪽으로 플래터 회전시키는 시간
- 전송시간
  - hdd -> 컴퓨터 전송 시간

### 플래시 메모리
- USB SD SSD
- 전기적으로 데이터 읽고 쓸 수 있음 반도체 기반
- 일상적으로 접하는 모든 전자제품 안에 플래시 메모리 내장되어있음
  - NAND, NOR 플래시 메모리 / NAND 가 대용량 저장장치로 많이 사용됨
- Cell, 플래시 메모리에서 데이터 저장하는 가장 작은 단위
  - SLC (single level cell) 1 cell = 1 bit 
    - 한 cell 로 두개의 정보 표현
    - 수명이 길다, 비트의 빠른 입출력 가능, 용량대비 가격 높음
  - MLC (multiple level cell) 1 cell = 2 bit
    -  한 cell 로 네개의 정보 표현
    - SLC 보다 대용화 유리
  - TLC (Triple level cell) 1 cell = 3 bit
    - 힌 cell 로 8개의 정보 표현
    - 대용량화 유리 , 수명 짧음, 저렴함
  - QLC ~~ 4bit

플래시 메모리에도 수명이 있음
- 수명이 다하면 저장 장치로써 이용 불가

### 결국엔 선택 (티어링과도 연관 있음)
- 썻다 지우기 자주 반복 -> SLC
- 저가의 대용량 -> TLC
- 그 중간 -> MLC

### Cell 의 상위 단위

- 페이지 : 셀들의 모임
- 블록 : 페이지의 모임
- 플레인 : 블록의 모임
- 다이 : 플레인의 모임

### 플래시 메모리의 가장 큰 특징

> 읽기 / 쓰기 단위와 삭제 의 단위가 다름

- 읽기 / 쓰기 = 페이지 단위
- 삭제 = 블록 단위
- 하드디스크와 달리 덮어쓰기 불가

### 플래시 메모리 페이지의 상태

- Free
  - 어떠한 데이터도 저장하고 있지 않은 상태
- valid
  - 유효한 데이터를 저장하고 있는 상태
- invalid
  - 쓰레기 값 (dirty page)
  - 유효하지 않은 값

![img src](https://user-images.githubusercontent.com/49462767/225078308-f7f23168-fe41-47a5-b8bc-a740fb016c47.png)


- 덮어쓰기 되지 않는 관계로 A -> A' 로 수정할때
- A 는 invalid 상태가 된다 하지만 이것은 용량을 차지한다!

### Garbage collection

- 유효한 페이지들만 새로운 블록으로 복사
- 기존의 블록을 삭제

## 7-2 RAID의 정의와 종류

- RAID 0 ~ 6

### RAID 의 정의
- Redundant Array of Independent Disks
- 여러개의 물리적 보조기억장치를 하나의 논리적 보조기억장치처럼 사용 (HDD SSD)

### RAID Level

- RAID 구성 방법
- RAID 0 ~ 6 , 10, 50 등이 있다
- 현재는 RAID 2 , 3 은 잘 사용하지 않음

### RAID 0

- 디스크 개수만큼 데이터를 쪼갬
  - stripe
  - 이러한 행위를 striping
- 이론상 디스크 개수 배수 만큼 빠름 (동일 용량일때)
  - 4TB 1 개보다  1TB 4 개가 4배 빠름
- 디스크중 하나만 잘못되어도 모든 하드 디스크 정보 읽는데 문제 생김


### RAID 1

- 미러링을 통해 백업을 구현한다
- 1TB 2개 는 원본 2개는 백업 구현
- 원본, 백업 두군데 쓰기를 실행하므로 / 쓰는 속도는 RAID 0 보다 느림
- 복구 매우 간단
- 사용 용량 적어짐 -> 비용 증가


### RAID 4

- 완전한 복사본 아님
- 패리티 비트
  - 오류를 검출하고 복원하기 위한 정보
  - 본래 패리티 비트는 오류 검출용 이지만 RAID 에선 패리티 값으로 오류 복구 가능함
- 패리티를 저장하는 장치를 하나 따로 둔다

### RAID 5
- RAID 4 에서 등장하는 패리티를 분산 저장한다
![img src](https://user-images.githubusercontent.com/49462767/225084959-8c7fbab1-8631-415a-9de9-9f94fa8f6277.png)


### RAID 6
- 서로 다른 두 개의 패리티를 분산 저장한다
- 오류 검출, 복구 수단이 두개가 된 것
- 쓰기 속도는 RAID 5 보다 느리나, 안전함


